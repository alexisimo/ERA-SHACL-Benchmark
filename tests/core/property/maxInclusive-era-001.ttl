@prefix era-sh: <http://data.europa.eu/949/shapes/> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix era: <http://data.europa.eu/949/> .
@prefix mf: <http://www.w3.org/2001/sw/DataAccess/tests/test-manifest#> .
@prefix sht: <http://www.w3.org/ns/shacl-test#> .

era-sh:trackShape  
    a sh:NodeShape ;
    # sh:targetClass era:Track .
    sh:targetNode <http://data.europa.eu/949/functionalInfrastructure/tracks/283a106ecec2d9ba0be16cbd47e0f09156acd2fd> ; # Valid Resource
    sh:targetNode <http://data.europa.eu/949/functionalInfrastructure/tracks/285f79f7bf9d80b5e5080ac0f90df2cc03cf54c9> ; # Synthetic Valid Resource
    sh:targetNode <http://data.europa.eu/949/functionalInfrastructure/tracks/267a882b7e055865f874a0ec7bf74b15e5659d58> ; # Synthetic Invalid Resource
    sh:targetNode <http://data.europa.eu/949/functionalInfrastructure/tracks/aba4b5552c35a885d42d368b9490c367aa74c260> . # Synthetic Invalid Resource

# maximumPermittedSpeed: # 1.1.1.1.2.5
era-sh:trackShape sh:property era-sh:MaximumPermittedSpeed.
era-sh:MaximumPermittedSpeed
	a sh:PropertyShape ; 
    era:affectedProperty era:maximumPermittedSpeed;
    era:affectedClass  era:Track;
    era:scope "local";
    era:validationAfterXML "false"^^xsd:boolean;
	rdfs:comment "Maximum permitted speed." ;
	era:rinfIndex "1.1.1.1.2.5" ;
	sh:path era:maximumPermittedSpeed ;
	# sh:maxCount 1 ;
	# sh:datatype xsd:integer ;
	# sh:minInclusive 0 ;
	sh:maxInclusive 500 ;
	# sh:severity sh:Violation ;
	# sh:message "maximumPermittedSpeed (1.1.1.1.2.5): The track must have at most one value of maximum permitted speed that is  an integer that lies within the range 0 to 500. This error may be due to the track having more than one value of maximum permitted speed, that the value does not lie within the range, or that the value is not an integer."@en .
.


<>
  rdf:type mf:Manifest ;
  mf:entries (
      <maxInclusive-era-001>
    ) ;
.
<maxInclusive-era-001>
  rdf:type sht:Validate ;
  rdfs:label "Test of property maxInclusive 001" ;
  mf:action [
      sht:dataGraph <maxInclusive-era-001-data.ttl> ;
      sht:shapesGraph <> ;
    ] ;
  mf:result [
      rdf:type sh:ValidationReport ;
      sh:conforms "false"^^xsd:boolean ;
	  sh:result [ 
			rdf:type sh:ValidationResult ;
            sh:focusNode <http://data.europa.eu/949/functionalInfrastructure/tracks/267a882b7e055865f874a0ec7bf74b15e5659d58> ;
            sh:resultPath era:maximumPermittedSpeed ;
            sh:resultSeverity sh:Violation ;
            sh:sourceConstraintComponent  sh:MaxInclusiveConstraintComponent ;
            sh:sourceShape era-sh:MaximumPermittedSpeed ;
            sh:value 510
        ] ;
	  sh:result [ 
			rdf:type sh:ValidationResult ;
            sh:focusNode <http://data.europa.eu/949/functionalInfrastructure/tracks/aba4b5552c35a885d42d368b9490c367aa74c260> ;
            sh:resultPath era:maximumPermittedSpeed ;
            sh:resultSeverity sh:Violation ;
            sh:sourceConstraintComponent sh:MaxInclusiveConstraintComponent ;
            sh:sourceShape era-sh:MaximumPermittedSpeed ;
            sh:value "a"
        ] ;      
    ] ;
   mf:status sht:proposed ;
.